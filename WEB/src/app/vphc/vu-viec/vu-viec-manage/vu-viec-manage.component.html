<ejs-splitter #expand height='100%' width='100%'>
    <e-panes>
        <e-pane size='400px' [collapsible]='true'>
            <ng-template #content>
                <div class="template">
                    <div class='card rounded-0'>
                        <div class="card-header border-0 pt-5 pb-0 px-5 min-h-50">
                            <h3 class="card-title align-items-start flex-column">
                                <span class="card-label fw-bolder text-gray-900">Tổng hợp nhanh
                                </span>
                            </h3>
                            <div class="card-toolbar">
                                <button type="button" class="btn btn-sm btn-light-primary" (click)="exportExcel()"><i
                                        class="fas fa-file-word"></i>
                                    {{'SharedLabel.ExportFile' | translate}}</button>
                            </div>
                        </div>
                        <div class="card-body px-0 py-5">
                            <div id='treeparent'>
                                <ejs-treeview id='treeelement' [fields]="field"
                                    [nodeTemplate]="nodeTemplate"></ejs-treeview>
                                <ng-template #nodeTemplate let-data>
                                    <div class="tree-node-custom">
                                        <span class="node-text fs-5" [ngClass]="{'fw-bold':data.hideTotal}">{{ data.text
                                            }}</span>
                                        <span class="badge fs-5" *ngIf="!data.hideTotal">{{data.total |
                                            ntsnumber}}</span>
                                    </div>
                                </ng-template>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </e-pane>
        <e-pane size='200px' [collapsible]='true'>
            <ng-template #content>
                <div class="template">
                    <div class='card rounded-0 p-5'>
                        <div class="row">
                            <div class="col-sm-12 col-md-2 flex-fill px-2">
                                <div class="d-flex align-items-center bg-hover-light bg-light-primary rounded p-2">
                                    <span class="svg-icon text-primary me-3"><i
                                            class="fa-solid fa-file-export text-primary fs-1"></i></span>
                                    <div class="d-flex justify-content-center flex-column">
                                        <span class="fw-bolder text-gray-800 text-hover-primary fs-7 mb-2">
                                            Tiếp nhận, phát hiện </span>
                                        <span class="text-muted fw-bold d-block fs-7">{{modelResult.vuTiepNhan |
                                            ntsnumber}}
                                            vụ/{{modelResult.nguoiTiepNhan | ntsnumber}} người</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-2 flex-fill px-2">
                                <div class="d-flex align-items-center bg-hover-light bg-light-info rounded p-2">
                                    <span class="svg-icon text-info me-3"><i
                                            class="fa-solid fa-file-pen text-info fs-1"></i></span>
                                    <div class="d-flex justify-content-center flex-column">
                                        <span class="fw-bolder text-gray-800 text-hover-info fs-7 mb-2">
                                            Lập biên bản </span>
                                        <span class="text-muted fw-bold d-block">{{modelResult.vuLBB | ntsnumber}}
                                            vụ/{{modelResult.nguoiLBB | ntsnumber}} người</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-2 flex-fill px-2">
                                <div class="d-flex align-items-center bg-hover-light bg-light-warning rounded p-2">
                                    <span class="svg-icon text-warning me-3"><i
                                            class="fa-solid fa-file-circle-check text-warning fs-1"></i></span>
                                    <div class="d-flex justify-content-center flex-column">
                                        <span class="fw-bolder text-gray-800 text-hover-warning fs-7 mb-2">
                                            Kiểm tra xác minh </span>
                                        <span class="text-muted fw-bold d-block">{{modelResult.vuXM | ntsnumber}}
                                            vụ/{{modelResult.nguoiXM | ntsnumber}} người</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-2 flex-fill px-2">
                                <div class="d-flex align-items-center bg-hover-light bg-light-danger rounded p-2">
                                    <span class="svg-icon text-danger me-3"><i
                                            class="fa-solid fa-gavel text-danger fs-1"></i></span>
                                    <div class="d-flex justify-content-center flex-column">
                                        <span class="fw-bolder text-gray-800 text-hover-danger fs-7 mb-2">
                                            Xử lý </span>
                                        <span class="text-muted fw-bold d-block">{{modelResult.vuXuLy | ntsnumber}}
                                            vụ/{{modelResult.nguoiXuLy | ntsnumber}} người</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-2 flex-fill px-2">
                                <div class="d-flex align-items-center bg-hover-light bg-light-success rounded p-2">
                                    <span class="svg-icon text-success me-3"><i
                                            class="far fa-check-circle text-success fs-1"></i></span>
                                    <div class="d-flex justify-content-center flex-column">
                                        <span class="fw-bolder text-gray-800 text-hover-success fs-7 mb-2">
                                            Kết thúc </span>
                                        <span class="text-muted fw-bold d-block">{{modelResult.vuKetThuc | ntsnumber}}
                                            vụ/{{modelResult.nguoiKetThuc | ntsnumber}} người</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-header border-0 p-0">
                            <h3 class="card-title align-items-start flex-column">
                                <span class="card-label fw-bolder text-gray-900">{{'SharedLabel.Total' | translate}} <b
                                        class="text-danger">{{totalRecords | ntsnumber}}</b> {{'VuViec.LableTotal' |
                                    translate}}
                                    <span style="color: #f1f1f4;font-weight: lighter;"> | </span>Người vi phạm <b
                                        class="text-danger">{{tongNguoiVP | ntsnumber}}</b>
                                    <span style="color: #f1f1f4;font-weight: lighter;"> | </span>Tổ chức vi phạm <b
                                        class="text-danger">{{tongToChucVP | ntsnumber}}</b>
                                    <span style="color: #f1f1f4;font-weight: lighter;"> | </span>Tổng tiền nộp phạt <b
                                        class="text-danger">{{tongTienPhat | ntsnumber}}</b>
                                </span>
                            </h3>
                            <div class="card-toolbar">
                                <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                                    <button type="button" class="btn btn-sm btn-light-success" (click)="showCreate()"
                                        container="body" *appUipermission="['F0101']">
                                        <i class="fa fa-plus"></i>
                                        {{'SharedLabel.Add' | translate}}</button>
                                    <button type="button" class="btn btn-sm btn-light-warning"
                                        (click)="exportExcel()"><i class="fas fa-file-excel"></i>
                                        {{'SharedLabel.ExportFile' | translate}}</button>

                                    <div class="btn-group" role="group">
                                        <button id="kt_menu_button" type="button"
                                            class="btn btn-sm btn-light-primary font-weight-bold dropdown-toggle"
                                            data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end"
                                            aria-expanded="false">

                                        </button>
                                        <!-- Menu Dropdown -->
                                        <div class="menu menu-sub menu-sub-dropdown w-200px w-md-200px"
                                            aria-labelledby="kt_menu_button" data-kt-menu="true">
                                            <div class="px-7 py-3">
                                                <div class="fs-7 text-gray-600 fw-bolder">Chức năng khác</div>
                                            </div>
                                            <div class="separator border-gray-200"></div>
                                            <div class="py-2">
                                                <div class="menu-item px-3 my-0">
                                                    <a class="menu-link px-3 py-2">
                                                        <span class="menu-icon fa-solid fa-file-pdf"></span><span
                                                            class="menu-title">Xuất file pdf</span></a>
                                                </div>
                                                <div class="menu-item px-3 my-0">
                                                    <a class="menu-link px-3 py-2">
                                                        <span class="menu-icon fas fa-trash-alt"></span><span
                                                            class="menu-title">Xóa vụ việc</span></a>
                                                </div>
                                                <div class="menu-item px-3 my-0">
                                                    <a class="menu-link px-3 py-2">
                                                        <span class="menu-icon fas fa-power-off"></span><span
                                                            class="menu-title">Kết thúc vụ việc</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-0">

                            
                            <div class="row">
                                <div class="col-xl-12 col-md-12 col-sm-12 col-lg-12">
                                    <ejs-grid #grVuViec id='grVuViec' [dataSource]='users' [allowPaging]='true'
                                        [pageSettings]="{pageSize:this.searchModel.pageSize}" [allowSorting]='true'
                                        allowTextWrap='true' [contextMenuItems]='contextMenuItems'
                                        (actionBegin)="actionBegin($event)"
                                        (contextMenuClick)='contextMenuClick($event)'>
                                        <e-columns>
                                            <e-column field="Index" [allowSorting]="false"
                                                headerText="{{'SharedLabel.STT' | translate}}" textAlign='center'
                                                width=60></e-column>
                                            <e-column field="MaHoSo" headerText="{{'VuViec.MaHoSo' | translate}}"
                                                textAlign='center' width=125></e-column>
                                            <e-column field="DonVi" headerText="{{'VuViec.DonVi' | translate}}"
                                                textAlign='left' width=180></e-column>
                                            <e-column field="ThoiGianTiepNhan"
                                                headerText="{{'VuViec.ThoiGianTiepNhan' | translate}}" textAlign="left"
                                                width="120">
                                                <ng-template #template let-data>
                                                    {{ data.thoiGianTiepNhan | date: 'dd/MM/yyyy' }}
                                                </ng-template>
                                            </e-column>
                                            <e-column field="DiaChiDayDu"
                                                headerText="{{'VuViec.DiaChiDayDu' | translate}}" textAlign='left'
                                                width=200></e-column>
                                            <e-column field="DienBien" headerText="{{'VuViec.DienBien' | translate}}"
                                                textAlign='left' width=250>
                                                <ng-template #template let-data>
                                                    <app-nts-text-more [ntsLimit]="2" [ntsText]="data.dienBien">
                                                    </app-nts-text-more>
                                                </ng-template>
                                            </e-column>
                                            <e-column field="TongNguoiVP"
                                                headerText="{{'VuViec.TongNguoiVP' | translate}}" textAlign='center'
                                                width=100></e-column>
                                            <e-column field="TongToChucVP"
                                                headerText="{{'VuViec.TongToChucVP' | translate}}" textAlign='center'
                                                width=100></e-column>
                                            <e-column field="XuLy"
                                                headerText="Xử lý" textAlign='left'
                                                width=130>
                                                <ng-template #template let-data>
                                                    <app-nts-status-badge [items]="constant.VuViec_XuLy"
                                                        [value]="data.xuLy">
                                                    </app-nts-status-badge>
                                                </ng-template>
                                            </e-column>
                                            <e-column field="TongTienPhat"
                                                headerText="{{'VuViec.TongTienPhat' | translate}}" textAlign='right'
                                                width=140>
                                                <ng-template #template let-data>
                                                    {{ data.tongTienPhat | ntsnumber }}
                                                </ng-template></e-column>
                                            <e-column field="TienTrinhHoSo"
                                                headerText="{{'VuViec.TienTrinhHoSo' | translate}}" textAlign='left'
                                                width=160>
                                                <ng-template #template let-data>
                                                    <app-nts-status-badge [items]="constant.VuViec_TienTrinh"
                                                        [value]="data.tienTrinhHoSo">
                                                    </app-nts-status-badge>
                                                </ng-template>
                                            </e-column>
                                        </e-columns>
                                        <ng-template #pagerTemplate let-data>
                                            <app-nts-pagination [totalRecords]="totalRecords"
                                                [pageSize]="searchModel.pageSize" [pageNumber]="searchModel.pageNumber"
                                                [listPageSize]="constant.ListPageSize"
                                                (pageChange)="actionBegin($event)">
                                            </app-nts-pagination>
                                        </ng-template>
                                    </ejs-grid>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-template>
        </e-pane>
    </e-panes>
</ejs-splitter>