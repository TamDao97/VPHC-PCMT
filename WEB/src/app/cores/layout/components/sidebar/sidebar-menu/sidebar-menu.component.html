<ng-container *ngIf="user$ | async as _user">
  <!--begin::Menu wrapper-->
  <div id="kt_app_sidebar_menu_scroll" class="scroll-y my-5 mx-3" data-kt-scroll="true" data-kt-scroll-activate="true"
    data-kt-scroll-height="auto" data-kt-scroll-dependencies="#kt_app_sidebar_logo, #kt_app_sidebar_footer"
    data-kt-scroll-wrappers="#kt_app_sidebar_menu" data-kt-scroll-offset="5px" data-kt-scroll-save-state="true">
    <!--begin::Menu-->
    <div class="menu menu-column menu-rounded menu-sub-indention fw-semibold fs-6" id="#kt_app_sidebar_menu"
      data-kt-menu="true" data-kt-menu-expand="false">
      @for (item of _user.menuView; track $index) {
      @if(item.type === "collapsable")
      {
      <div class="menu-item menu-accordion" data-kt-menu-trigger="click" routerLinkActive="here show">
        <span class="menu-link">
          <span [class]="item.icon" class="menu-icon fs-2 me-2"></span>
          <span class="menu-title">{{item.titleKeyTranslate | translate}}
          </span>
          <span class="menu-arrow"></span>
        </span>
        @if(item.children.length>0)
        {
        @for (itemL1 of item.children; track $index) {
        <div class="menu-sub menu-sub-accordion" routerLinkActive="menu-active-bg">
          @if(itemL1.type === "collapsable")
          {
          <div class="menu-item menu-accordion" routerLinkActive="here show" data-kt-menu-trigger="click">
            <span class="menu-link">
              <span class="menu-bullet">
                <span [class]="itemL1.icon" class="menu-icon fs-2 me-2"></span>
              </span>
              <span class="menu-title">{{itemL1.titleKeyTranslate | translate}}
              </span>
              <span class="menu-arrow"></span>
            </span>

            @if(itemL1.children.length>0)
            {
            <div class="menu-sub menu-sub-accordion" routerLinkActive="menu-active-bg">
              @for (itemL2 of itemL1.children; track $index) {
              <div class="menu-item">
                <a class="menu-link without-sub" routerLinkActive="active" [routerLink]="itemL2.url">
                  <span class="menu-bullet">
                    <span [class]="itemL2.icon" class="menu-icon fs-2 me-2"></span>
                  </span>
                  <span class="menu-title">{{itemL2.titleKeyTranslate| translate}}</span>
                </a>
              </div>
              }
            </div>
            }

          </div>
          }@else {
          <div class="menu-item">
            <a class="menu-link without-sub" routerLinkActive="active" [routerLink]="itemL1.url">
              <span class="menu-bullet">
                <span [class]="itemL1.icon" class="menu-icon fs-2 me-2"></span>
              </span>
              <span class="menu-title">{{itemL1.titleKeyTranslate | translate}}
              </span>
            </a>
          </div>
          }
        </div>
        }
        }
      </div>
      }@else {
      <div class="menu-item">
        <a class="menu-link without-sub" [routerLink]="item.url" routerLinkActive="active">
          <span [class]="item.icon" class="menu-icon fs-2 me-2"></span>
          <span class="menu-title">{{item.titleKeyTranslate | translate}}</span>
        </a>
      </div>
      }
      }

    </div>
    <!--end::Menu-->
  </div>
  <!--end::Menu wrapper-->
</ng-container>